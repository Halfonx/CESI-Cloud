<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>File Manager</title>
    </head>
    <body>
        <h1>File Manager</h1>
        <textarea id="text" rows="4" cols="50" placeholder="Enter text here..."></textarea>
        <br>
        <button id="upload">Upload</button>
        <h2>Files:</h2>
        <ul id="file-list"></ul>
        <script>
         const uploadButton = document.getElementById('upload');
         const textArea = document.getElementById('text');
         const fileList = document.getElementById('file-list');

         const fetchFiles = async () => {
             const response = await fetch('/files');
             const data = await response.json();
             fileList.innerHTML = '';
             data.files.forEach(file => {
                 const li = document.createElement('li');
                 const a = document.createElement('a');
                 a.href = `/files/${file}`;
                 a.textContent = file;
                 li.appendChild(a);
                 fileList.appendChild(li);
             });
         };

         uploadButton.addEventListener('click', async () => {
             const text = textArea.value;
             if (text) {
                 await fetch('/files', {
                     method: 'POST',
                     headers: { 'Content-Type': 'application/json' },
                     body: JSON.stringify({ text })
                 });
                 textArea.value = '';
                 await fetchFiles();
             }
         });

         setInterval(fetchFiles, 30000);
         fetchFiles();
        </script>
    </body>
</html>